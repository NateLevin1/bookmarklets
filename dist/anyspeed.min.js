const domain=window.location.hostname;if("drive.google.com"===domain){const a=document.getElementById("drive-viewer-video-player-object-0");throw alert("Please re-activate AnySpeed in the URL that will open shortly"),window.open(a.src,"_blank"),new Error("Can't use AnySpeed on Google Drive.")}const videos=Array.from(document.querySelectorAll("video")),newPlaybackRate=Number(prompt("What rate do you want?"));if(!newPlaybackRate||isNaN(newPlaybackRate))throw new Error("Canceled change of playback rate");window.anySpeedPlaybackRate=newPlaybackRate;const timeWhenChanged=Date.now();for(const b of videos)b.playbackRate=newPlaybackRate,b.addEventListener("ratechange",()=>{var e=Date.now()-timeWhenChanged;b.playbackRate!=newPlaybackRate&&e<500&&(console.info("⏱ AnySpeed - This website is automatically changing the playback speed... Bypassing the defenses!"),repeatedlySpeedUp(b))});function repeatedlySpeedUp(e){e.playbackRate=window.anySpeedPlaybackRate,requestAnimationFrame(()=>repeatedlySpeedUp(e))}const possibleYouTubePlayers=Array.from(document.querySelectorAll("iframe[src*='youtube.com'], iframe[src*='youtubeeducation.com']"));for(const e of possibleYouTubePlayers)try{e?.contentWindow?.postMessage&&repeatedlySendYouTubeMessage(e)}catch(e){console.error("AnySpeed detected YouTube on this page, but something went wrong controlling the speed: ",e)}function repeatedlySendYouTubeMessage(e){var a={event:"command",func:"setPlaybackRate",args:[window.anySpeedPlaybackRate],id:1,channel:"widget"};e.contentWindow.postMessage(JSON.stringify(a),"*"),requestAnimationFrame(()=>repeatedlySendYouTubeMessage(e))}